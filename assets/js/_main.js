/* ======================================================================== * DOM-based Routing * Based on http://goo.gl/EUTi53 by Paul Irish * * Only fires on body classes that match. If a body class contains a dash, * replace the dash with an underscore when adding it to the object below. * * .noConflict() * The routing is enclosed within an anonymous function so that you can  * always reference jQuery with $, even when in .noConflict() mode. * * Google CDN, Latest jQuery * To use the default WordPress version of jQuery, go to lib/config.php and * remove or comment out: add_theme_support('jquery-cdn'); * ======================================================================== *//*** Styled Select Box JS*/(function(){var e,t,n,r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);r.prototype=t.prototype;e.prototype=new r;e.__super__=t.prototype;return e};r=function(){function e(){this.options_index=0;this.parsed=[]}e.prototype.add_node=function(e){return e.nodeName.toUpperCase()==="OPTGROUP"?this.add_group(e):this.add_option(e)};e.prototype.add_group=function(e){var t,n,r,i,s,o;t=this.parsed.length;this.parsed.push({array_index:t,group:!0,label:this.escapeExpression(e.label),children:0,disabled:e.disabled});s=e.childNodes;o=[];for(r=0,i=s.length;r<i;r++){n=s[r];o.push(this.add_option(n,t,e.disabled))}return o};e.prototype.add_option=function(e,t,n){if(e.nodeName.toUpperCase()==="OPTION"){if(e.text!==""){t!=null&&(this.parsed[t].children+=1);this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:n===!0?n:e.disabled,group_array_index:t,classes:e.className,style:e.style.cssText})}else this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0});return this.options_index+=1}};e.prototype.escapeExpression=function(e){var t,n;if(e==null||e===!1)return"";if(!/[\&\<\>\"\'\`]/.test(e))return e;t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};n=/&(?!\w+;)|[\<\>\"\'\`]/g;return e.replace(n,function(e){return t[e]||"&amp;"})};return e}();r.select_to_array=function(e){var t,n,i,s,o;n=new r;o=e.childNodes;for(i=0,s=o.length;i<s;i++){t=o[i];n.add_node(t)}return n.parsed};t=function(){function e(t,n){this.form_field=t;this.options=n!=null?n:{};if(!e.browser_is_supported())return;this.is_multiple=this.form_field.multiple;this.set_default_text();this.set_default_values();this.setup();this.set_up_html();this.register_observers()}e.prototype.set_default_values=function(){var e=this;this.click_test_action=function(t){return e.test_active_click(t)};this.activate_action=function(t){return e.activate_field(t)};this.active_field=!1;this.mouse_on_container=!1;this.results_showing=!1;this.result_highlighted=null;this.result_single_selected=null;this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1;this.disable_search_threshold=this.options.disable_search_threshold||0;this.disable_search=this.options.disable_search||!1;this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:!0;this.group_search=this.options.group_search!=null?this.options.group_search:!0;this.search_contains=this.options.search_contains||!1;this.single_backstroke_delete=this.options.single_backstroke_delete!=null?this.options.single_backstroke_delete:!0;this.max_selected_options=this.options.max_selected_options||Infinity;this.inherit_select_classes=this.options.inherit_select_classes||!1;this.display_selected_options=this.options.display_selected_options!=null?this.options.display_selected_options:!0;return this.display_disabled_options=this.options.display_disabled_options!=null?this.options.display_disabled_options:!0};e.prototype.set_default_text=function(){this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text;return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text};e.prototype.mouse_enter=function(){return this.mouse_on_container=!0};e.prototype.mouse_leave=function(){return this.mouse_on_container=!1};e.prototype.input_focus=function(e){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()};e.prototype.input_blur=function(e){var t=this;if(!this.mouse_on_container){this.active_field=!1;return setTimeout(function(){return t.blur_test()},100)}};e.prototype.results_option_build=function(e){var t,n,r,i,s;t="";s=this.results_data;for(r=0,i=s.length;r<i;r++){n=s[r];n.group?t+=this.result_add_group(n):t+=this.result_add_option(n);if(e!=null?e.first:void 0)n.selected&&this.is_multiple?this.choice_build(n):n.selected&&!this.is_multiple&&this.single_set_selected_text(n.text)}return t};e.prototype.result_add_option=function(e){var t,n;if(!e.search_match)return"";if(!this.include_option_in_results(e))return"";t=[];!e.disabled&&(!e.selected||!this.is_multiple)&&t.push("active-result");e.disabled&&(!e.selected||!this.is_multiple)&&t.push("disabled-result");e.selected&&t.push("result-selected");e.group_array_index!=null&&t.push("group-option");e.classes!==""&&t.push(e.classes);n=e.style.cssText!==""?' style="'+e.style+'"':"";return'<li class="'+t.join(" ")+'"'+n+' data-option-array-index="'+e.array_index+'">'+e.search_text+"</li>"};e.prototype.result_add_group=function(e){return!e.search_match&&!e.group_match?"":e.active_options>0?'<li class="group-result">'+e.search_text+"</li>":""};e.prototype.results_update_field=function(){this.set_default_text();this.is_multiple||this.results_reset_cleanup();this.result_clear_highlight();this.result_single_selected=null;this.results_build();if(this.results_showing)return this.winnow_results()};e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()};e.prototype.results_search=function(e){return this.results_showing?this.winnow_results():this.results_show()};e.prototype.winnow_results=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h;this.no_results_clear();i=0;o=this.get_search_text();e=o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");r=this.search_contains?"":"^";n=new RegExp(r+e,"i");f=new RegExp(e,"i");h=this.results_data;for(l=0,c=h.length;l<c;l++){t=h[l];t.search_match=!1;s=null;if(this.include_option_in_results(t)){if(t.group){t.group_match=!1;t.active_options=0}if(t.group_array_index!=null&&this.results_data[t.group_array_index]){s=this.results_data[t.group_array_index];s.active_options===0&&s.search_match&&(i+=1);s.active_options+=1}if(!t.group||!!this.group_search){t.search_text=t.group?t.label:t.html;t.search_match=this.search_string_match(t.search_text,n);t.search_match&&!t.group&&(i+=1);if(t.search_match){if(o.length){u=t.search_text.search(f);a=t.search_text.substr(0,u+o.length)+"</em>"+t.search_text.substr(u+o.length);t.search_text=a.substr(0,u)+"<em>"+a.substr(u)}s!=null&&(s.group_match=!0)}else t.group_array_index!=null&&this.results_data[t.group_array_index].search_match&&(t.search_match=!0)}}}this.result_clear_highlight();if(i<1&&o.length){this.update_results_content("");return this.no_results(o)}this.update_results_content(this.results_option_build());return this.winnow_results_set_highlight()};e.prototype.search_string_match=function(e,t){var n,r,i,s;if(t.test(e))return!0;if(this.enable_split_word_search&&(e.indexOf(" ")>=0||e.indexOf("[")===0)){r=e.replace(/\[|\]/g,"").split(" ");if(r.length)for(i=0,s=r.length;i<s;i++){n=r[i];if(t.test(n))return!0}}};e.prototype.choices_count=function(){var e,t,n,r;if(this.selected_option_count!=null)return this.selected_option_count;this.selected_option_count=0;r=this.form_field.options;for(t=0,n=r.length;t<n;t++){e=r[t];e.selected&&(this.selected_option_count+=1)}return this.selected_option_count};e.prototype.choices_click=function(e){e.preventDefault();if(!this.results_showing&&!this.is_disabled)return this.results_show()};e.prototype.keyup_checker=function(e){var t,n;t=(n=e.which)!=null?n:e.keyCode;this.search_field_scale();switch(t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke){this.result_clear_highlight();return this.results_search()}break;case 13:e.preventDefault();if(this.results_showing)return this.result_select(e);break;case 27:this.results_showing&&this.results_hide();return!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}};e.prototype.container_width=function(){return this.options.width!=null?this.options.width:""+this.form_field.offsetWidth+"px"};e.prototype.include_option_in_results=function(e){return this.is_multiple&&!this.display_selected_options&&e.selected?!1:!this.display_disabled_options&&e.disabled?!1:e.empty?!1:!0};e.browser_is_supported=function(){return window.navigator.appName==="Microsoft Internet Explorer"?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0};e.default_multiple_text="Select Some Options";e.default_single_text="Select an Option";e.default_no_result_text="No results match";return e}();e=jQuery;e.fn.extend({chosen:function(r){return t.browser_is_supported()?this.each(function(t){var i,s;i=e(this);s=i.data("chosen");r==="destroy"&&s?s.destroy():s||i.data("chosen",new n(this,r))}):this}});n=function(t){function n(){i=n.__super__.constructor.apply(this,arguments);return i}o(n,t);n.prototype.setup=function(){this.form_field_jq=e(this.form_field);this.current_selectedIndex=this.form_field.selectedIndex;return this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")};n.prototype.set_up_html=function(){var t,n;t=["chosen-container"];t.push("chosen-container-"+(this.is_multiple?"multi":"single"));this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className);this.is_rtl&&t.push("chosen-rtl");n={"class":t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title};this.form_field.id.length&&(n.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen");this.container=e("<div />",n);this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b class="fa fa-caret-down"></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>');this.form_field_jq.hide().after(this.container);this.dropdown=this.container.find("div.chosen-drop").first();this.search_field=this.container.find("input").first();this.search_results=this.container.find("ul.chosen-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();if(this.is_multiple){this.search_choices=this.container.find("ul.chosen-choices").first();this.search_container=this.container.find("li.search-field").first()}else{this.search_container=this.container.find("div.chosen-search").first();this.selected_item=this.container.find(".chosen-single").first()}this.results_build();this.set_tab_index();this.set_label_behavior();return this.form_field_jq.trigger("chosen:ready",{chosen:this})};n.prototype.register_observers=function(){var e=this;this.container.bind("mousedown.chosen",function(t){e.container_mousedown(t)});this.container.bind("mouseup.chosen",function(t){e.container_mouseup(t)});this.container.bind("mouseenter.chosen",function(t){e.mouse_enter(t)});this.container.bind("mouseleave.chosen",function(t){e.mouse_leave(t)});this.search_results.bind("mouseup.chosen",function(t){e.search_results_mouseup(t)});this.search_results.bind("mouseover.chosen",function(t){e.search_results_mouseover(t)});this.search_results.bind("mouseout.chosen",function(t){e.search_results_mouseout(t)});this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(t){e.search_results_mousewheel(t)});this.form_field_jq.bind("chosen:updated.chosen",function(t){e.results_update_field(t)});this.form_field_jq.bind("chosen:activate.chosen",function(t){e.activate_field(t)});this.form_field_jq.bind("chosen:open.chosen",function(t){e.container_mousedown(t)});this.search_field.bind("blur.chosen",function(t){e.input_blur(t)});this.search_field.bind("keyup.chosen",function(t){e.keyup_checker(t)});this.search_field.bind("keydown.chosen",function(t){e.keydown_checker(t)});this.search_field.bind("focus.chosen",function(t){e.input_focus(t)});return this.is_multiple?this.search_choices.bind("click.chosen",function(t){e.choices_click(t)}):this.container.bind("click.chosen",function(e){e.preventDefault()})};n.prototype.destroy=function(){e(document).unbind("click.chosen",this.click_test_action);this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex);this.container.remove();this.form_field_jq.removeData("chosen");return this.form_field_jq.show()};n.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled){this.container.addClass("chosen-disabled");this.search_field[0].disabled=!0;this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action);return this.close_field()}this.container.removeClass("chosen-disabled");this.search_field[0].disabled=!1;if(!this.is_multiple)return this.selected_item.bind("focus.chosen",this.activate_action)};n.prototype.container_mousedown=function(t){if(!this.is_disabled){t&&t.type==="mousedown"&&!this.results_showing&&t.preventDefault();if(t==null||!e(t.target).hasClass("search-choice-close")){if(!this.active_field){this.is_multiple&&this.search_field.val("");e(document).bind("click.chosen",this.click_test_action);this.results_show()}else if(!this.is_multiple&&t&&(e(t.target)[0]===this.selected_item[0]||e(t.target).parents("a.chosen-single").length)){t.preventDefault();this.results_toggle()}return this.activate_field()}}};n.prototype.container_mouseup=function(e){if(e.target.nodeName==="ABBR"&&!this.is_disabled)return this.results_reset(e)};n.prototype.search_results_mousewheel=function(e){var t,n,r;t=-((n=e.originalEvent)!=null?n.wheelDelta:void 0)||((r=e.originialEvent)!=null?r.detail:void 0);if(t!=null){e.preventDefault();e.type==="DOMMouseScroll"&&(t*=40);return this.search_results.scrollTop(t+this.search_results.scrollTop())}};n.prototype.blur_test=function(e){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()};n.prototype.close_field=function(){e(document).unbind("click.chosen",this.click_test_action);this.active_field=!1;this.results_hide();this.container.removeClass("chosen-container-active");this.clear_backstroke();this.show_search_field_default();return this.search_field_scale()};n.prototype.activate_field=function(){this.container.addClass("chosen-container-active");this.active_field=!0;this.search_field.val(this.search_field.val());return this.search_field.focus()};n.prototype.test_active_click=function(t){return this.container.is(e(t.target).closest(".chosen-container"))?this.active_field=!0:this.close_field()};n.prototype.results_build=function(){this.parsing=!0;this.selected_option_count=null;this.results_data=r.select_to_array(this.form_field);if(this.is_multiple)this.search_choices.find("li.search-choice").remove();else if(!this.is_multiple){this.single_set_selected_text();if(this.disable_search||this.form_field.options.length<=this.disable_search_threshold){this.search_field[0].readOnly=!0;this.container.addClass("chosen-container-single-nosearch")}else{this.search_field[0].readOnly=!1;this.container.removeClass("chosen-container-single-nosearch")}}this.update_results_content(this.results_option_build({first:!0}));this.search_field_disabled();this.show_search_field_default();this.search_field_scale();return this.parsing=!1};n.prototype.result_do_highlight=function(e){var t,n,r,i,s;if(e.length){this.result_clear_highlight();this.result_highlight=e;this.result_highlight.addClass("highlighted");r=parseInt(this.search_results.css("maxHeight"),10);s=this.search_results.scrollTop();i=r+s;n=this.result_highlight.position().top+this.search_results.scrollTop();t=n+this.result_highlight.outerHeight();if(t>=i)return this.search_results.scrollTop(t-r>0?t-r:0);if(n<s)return this.search_results.scrollTop(n)}};n.prototype.result_clear_highlight=function(){this.result_highlight&&this.result_highlight.removeClass("highlighted");return this.result_highlight=null};n.prototype.results_show=function(){if(this.is_multiple&&this.max_selected_options<=this.choices_count()){this.form_field_jq.trigger("chosen:maxselected",{chosen:this});return!1}this.container.addClass("chosen-with-drop");this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this});this.results_showing=!0;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results()};n.prototype.update_results_content=function(e){return this.search_results.html(e)};n.prototype.results_hide=function(){if(this.results_showing){this.result_clear_highlight();this.container.removeClass("chosen-with-drop");this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})}return this.results_showing=!1};n.prototype.set_tab_index=function(e){var t;if(this.form_field.tabIndex){t=this.form_field.tabIndex;this.form_field.tabIndex=-1;return this.search_field[0].tabIndex=t}};n.prototype.set_label_behavior=function(){var t=this;this.form_field_label=this.form_field_jq.parents("label");!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for='"+this.form_field.id+"']"));if(this.form_field_label.length>0)return this.form_field_label.bind("click.chosen",function(e){return t.is_multiple?t.container_mousedown(e):t.activate_field()})};n.prototype.show_search_field_default=function(){if(this.is_multiple&&this.choices_count()<1&&!this.active_field){this.search_field.val(this.default_text);return this.search_field.addClass("default")}this.search_field.val("");return this.search_field.removeClass("default")};n.prototype.search_results_mouseup=function(t){var n;n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first();if(n.length){this.result_highlight=n;this.result_select(t);return this.search_field.focus()}};n.prototype.search_results_mouseover=function(t){var n;n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first();if(n)return this.result_do_highlight(n)};n.prototype.search_results_mouseout=function(t){if(e(t.target).hasClass("active-result"))return this.result_clear_highlight()};n.prototype.choice_build=function(t){var n,r,i=this;n=e("<li />",{"class":"search-choice"}).html("<span>"+t.html+"</span>");if(t.disabled)n.addClass("search-choice-disabled");else{r=e("<a />",{"class":"search-choice-close","data-option-array-index":t.array_index});r.bind("click.chosen",function(e){return i.choice_destroy_link_click(e)});n.append(r)}return this.search_container.before(n)};n.prototype.choice_destroy_link_click=function(t){t.preventDefault();t.stopPropagation();if(!this.is_disabled)return this.choice_destroy(e(t.target))};n.prototype.choice_destroy=function(e){if(this.result_deselect(e[0].getAttribute("data-option-array-index"))){this.show_search_field_default();this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide();e.parents("li").first().remove();return this.search_field_scale()}};n.prototype.results_reset=function(){this.form_field.options[0].selected=!0;this.selected_option_count=null;this.single_set_selected_text();this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()};n.prototype.results_reset_cleanup=function(){this.current_selectedIndex=this.form_field.selectedIndex;return this.selected_item.find("abbr").remove()};n.prototype.result_select=function(e){var t,n,r;if(this.result_highlight){t=this.result_highlight;this.result_clear_highlight();if(this.is_multiple&&this.max_selected_options<=this.choices_count()){this.form_field_jq.trigger("chosen:maxselected",{chosen:this});return!1}if(this.is_multiple)t.removeClass("active-result");else{if(this.result_single_selected){this.result_single_selected.removeClass("result-selected");r=this.result_single_selected[0].getAttribute("data-option-array-index");this.results_data[r].selected=!1}this.result_single_selected=t}t.addClass("result-selected");n=this.results_data[t[0].getAttribute("data-option-array-index")];n.selected=!0;this.form_field.options[n.options_index].selected=!0;this.selected_option_count=null;this.is_multiple?this.choice_build(n):this.single_set_selected_text(n.text);(!e.metaKey&&!e.ctrlKey||!this.is_multiple)&&this.results_hide();this.search_field.val("");(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[n.options_index].value});this.current_selectedIndex=this.form_field.selectedIndex;return this.search_field_scale()}};n.prototype.single_set_selected_text=function(e){e==null&&(e=this.default_text);if(e===this.default_text)this.selected_item.addClass("chosen-default");else{this.single_deselect_control_build();this.selected_item.removeClass("chosen-default")}return this.selected_item.find("span").text(e)};n.prototype.result_deselect=function(e){var t;t=this.results_data[e];if(!this.form_field.options[t.options_index].disabled){t.selected=!1;this.form_field.options[t.options_index].selected=!1;this.selected_option_count=null;this.result_clear_highlight();this.results_showing&&this.winnow_results();this.form_field_jq.trigger("change",{deselected:this.form_field.options[t.options_index].value});this.search_field_scale();return!0}return!1};n.prototype.single_deselect_control_build=function(){if(!this.allow_single_deselect)return;this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close" title="Deselect Current Selection">x</abbr>');return this.selected_item.addClass("chosen-single-with-deselect")};n.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html()};n.prototype.winnow_results_set_highlight=function(){var e,t;t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result");e=t.length?t.first():this.search_results.find(".active-result").first();if(e!=null)return this.result_do_highlight(e)};n.prototype.no_results=function(t){var n;n=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');n.find("span").first().html(t);return this.search_results.append(n)};n.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()};n.prototype.keydown_arrow=function(){var e;if(!this.results_showing||!this.result_highlight)return this.results_show();e=this.result_highlight.nextAll("li.active-result").first();if(e)return this.result_do_highlight(e)};n.prototype.keyup_arrow=function(){var e;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight){e=this.result_highlight.prevAll("li.active-result");if(e.length)return this.result_do_highlight(e.first());this.choices_count()>0&&this.results_hide();return this.result_clear_highlight()}};n.prototype.keydown_backstroke=function(){var e;if(this.pending_backstroke){this.choice_destroy(this.pending_backstroke.find("a").first());return this.clear_backstroke()}e=this.search_container.siblings("li.search-choice").last();if(e.length&&!e.hasClass("search-choice-disabled")){this.pending_backstroke=e;return this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")}};n.prototype.clear_backstroke=function(){this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus");return this.pending_backstroke=null};n.prototype.keydown_checker=function(e){var t,n;t=(n=e.which)!=null?n:e.keyCode;this.search_field_scale();t!==8&&this.pending_backstroke&&this.clear_backstroke();switch(t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e);this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault();this.keyup_arrow();break;case 40:e.preventDefault();this.keydown_arrow()}};n.prototype.search_field_scale=function(){var t,n,r,i,s,o,u,a,f;if(this.is_multiple){r=0;u=0;s="position:absolute; left: -1000px; top: -1000px; display:none;";o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(a=0,f=o.length;a<f;a++){i=o[a];s+=i+":"+this.search_field.css(i)+";"}t=e("<div />",{style:s});t.text(this.search_field.val());e("body").append(t);u=t.width()+25;t.remove();n=this.container.outerWidth();u>n-10&&(u=n-10);return this.search_field.css({width:u+"px"})}};return n}(t)}).call(this);/*** JQuery Cookies*/!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function n(e){return u.raw?e:encodeURIComponent(e)}function o(e){return u.raw?e:decodeURIComponent(e)}function i(e){return n(u.json?JSON.stringify(e):String(e))}function r(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(c," ")),u.json?JSON.parse(e):e}catch(n){}}function t(n,o){var i=u.raw?n:r(n);return e.isFunction(o)?o(i):i}var c=/\+/g,u=e.cookie=function(r,c,a){if(arguments.length>1&&!e.isFunction(c)){if(a=e.extend({},u.defaults,a),"number"==typeof a.expires){var f=a.expires,s=a.expires=new Date;s.setTime(+s+864e5*f)}return document.cookie=[n(r),"=",i(c),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}for(var d=r?void 0:{},p=document.cookie?document.cookie.split("; "):[],m=0,x=p.length;x>m;m++){var l=p[m].split("="),g=o(l.shift()),k=l.join("=");if(r&&r===g){d=t(k,c);break}r||void 0===(k=t(k))||(d[g]=k)}return d};u.defaults={},e.removeCookie=function(n,o){return void 0===e.cookie(n)?!1:(e.cookie(n,"",e.extend({},o,{expires:-1})),!e.cookie(n))}});/*** jQuery Scroll to JS*/(function(k){'use strict';k(['jquery'],function($){var j=$.scrollTo=function(a,b,c){return $(window).scrollTo(a,b,c)};j.defaults={axis:'xy',duration:parseFloat($.fn.jquery)>=1.3?0:1,limit:!0};j.window=function(a){return $(window)._scrollable()};$.fn._scrollable=function(){return this.map(function(){var a=this,isWin=!a.nodeName||$.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!isWin)return a;var b=(a.contentWindow||a).document||a.ownerDocument||a;return/webkit/i.test(navigator.userAgent)||b.compatMode=='BackCompat'?b.body:b.documentElement})};$.fn.scrollTo=function(f,g,h){if(typeof g=='object'){h=g;g=0}if(typeof h=='function')h={onAfter:h};if(f=='max')f=9e9;h=$.extend({},j.defaults,h);g=g||h.duration;h.queue=h.queue&&h.axis.length>1;if(h.queue)g/=2;h.offset=both(h.offset);h.over=both(h.over);return this._scrollable().each(function(){if(f==null)return;var d=this,$elem=$(d),targ=f,toff,attr={},win=$elem.is('html,body');switch(typeof targ){case'number':case'string':if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break}targ=win?$(targ):$(targ,this);if(!targ.length)return;case'object':if(targ.is||targ.style)toff=(targ=$(targ)).offset()}var e=$.isFunction(h.offset)&&h.offset(d,targ)||h.offset;$.each(h.axis.split(''),function(i,a){var b=a=='x'?'Left':'Top',pos=b.toLowerCase(),key='scroll'+b,old=d[key],max=j.max(d,a);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(h.margin){attr[key]-=parseInt(targ.css('margin'+b))||0;attr[key]-=parseInt(targ.css('border'+b+'Width'))||0}attr[key]+=e[pos]||0;if(h.over[pos])attr[key]+=targ[a=='x'?'width':'height']()*h.over[pos]}else{var c=targ[pos];attr[key]=c.slice&&c.slice(-1)=='%'?parseFloat(c)/100*max:c}if(h.limit&&/^\d+$/.test(attr[key]))attr[key]=attr[key]<=0?0:Math.min(attr[key],max);if(!i&&h.queue){if(old!=attr[key])animate(h.onAfterFirst);delete attr[key]}});animate(h.onAfter);function animate(a){$elem.animate(attr,g,h.easing,a&&function(){a.call(this,targ,h)})}}).end()};j.max=function(a,b){var c=b=='x'?'Width':'Height',scroll='scroll'+c;if(!$(a).is('html,body'))return a[scroll]-$(a)[c.toLowerCase()]();var d='client'+c,html=a.ownerDocument.documentElement,body=a.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[d],body[d])};function both(a){return $.isFunction(a)||typeof a=='object'?a:{top:a,left:a}}return j})}(typeof define==='function'&&define.amd?define:function(a,b){if(typeof module!=='undefined'&&module.exports){module.exports=b(require('jquery'))}else{b(jQuery)}}));/*! Hammer.JS - v2.0.4 - 2014-09-28 * http://hammerjs.github.io/ * * Copyright (c) 2014 Jorik Tangelder; * Licensed under the MIT license */!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(k(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a}function i(a,b){return h(a,b,!0)}function j(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&h(d,c)}function k(a,b){return function(){return a.apply(b,arguments)}}function l(a,b){return typeof a==kb?a.apply(b?b[0]||d:d,b):a}function m(a,b){return a===d?b:a}function n(a,b,c){g(r(b),function(b){a.addEventListener(b,c,!1)})}function o(a,b,c){g(r(b),function(b){a.removeEventListener(b,c,!1)})}function p(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function q(a,b){return a.indexOf(b)>-1}function r(a){return a.trim().split(/\s+/g)}function s(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function t(a){return Array.prototype.slice.call(a,0)}function u(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];s(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function v(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ib.length;){if(c=ib[g],e=c?c+f:b,e in a)return e;g++}return d}function w(){return ob++}function x(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function y(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){l(a.options.enable,[a])&&c.handler(b)},this.init()}function z(a){var b,c=a.options.inputClass;return new(b=c?c:rb?N:sb?Q:qb?S:M)(a,A)}function A(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&yb&&d-e===0,g=b&(Ab|Bb)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,B(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function B(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=E(b)),e>1&&!c.firstMultiple?c.firstMultiple=E(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=F(d);b.timeStamp=nb(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=J(h,i),b.distance=I(h,i),C(c,b),b.offsetDirection=H(b.deltaX,b.deltaY),b.scale=g?L(g.pointers,d):1,b.rotation=g?K(g.pointers,d):0,D(c,b);var j=a.element;p(b.srcEvent.target,j)&&(j=b.srcEvent.target),b.target=j}function C(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===yb||f.eventType===Ab)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function D(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Bb&&(i>xb||h.velocity===d)){var j=h.deltaX-b.deltaX,k=h.deltaY-b.deltaY,l=G(i,j,k);e=l.x,f=l.y,c=mb(l.x)>mb(l.y)?l.x:l.y,g=H(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function E(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:lb(a.pointers[c].clientX),clientY:lb(a.pointers[c].clientY)},c++;return{timeStamp:nb(),pointers:b,center:F(b),deltaX:a.deltaX,deltaY:a.deltaY}}function F(a){var b=a.length;if(1===b)return{x:lb(a[0].clientX),y:lb(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:lb(c/b),y:lb(d/b)}}function G(a,b,c){return{x:b/a||0,y:c/a||0}}function H(a,b){return a===b?Cb:mb(a)>=mb(b)?a>0?Db:Eb:b>0?Fb:Gb}function I(a,b,c){c||(c=Kb);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function J(a,b,c){c||(c=Kb);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function K(a,b){return J(b[1],b[0],Lb)-J(a[1],a[0],Lb)}function L(a,b){return I(b[0],b[1],Lb)/I(a[0],a[1],Lb)}function M(){this.evEl=Nb,this.evWin=Ob,this.allow=!0,this.pressed=!1,y.apply(this,arguments)}function N(){this.evEl=Rb,this.evWin=Sb,y.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function O(){this.evTarget=Ub,this.evWin=Vb,this.started=!1,y.apply(this,arguments)}function P(a,b){var c=t(a.touches),d=t(a.changedTouches);return b&(Ab|Bb)&&(c=u(c.concat(d),"identifier",!0)),[c,d]}function Q(){this.evTarget=Xb,this.targetIds={},y.apply(this,arguments)}function R(a,b){var c=t(a.touches),d=this.targetIds;if(b&(yb|zb)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=t(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return p(a.target,i)}),b===yb)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ab|Bb)&&delete d[g[e].identifier],e++;return h.length?[u(f.concat(h),"identifier",!0),h]:void 0}function S(){y.apply(this,arguments);var a=k(this.handler,this);this.touch=new Q(this.manager,a),this.mouse=new M(this.manager,a)}function T(a,b){this.manager=a,this.set(b)}function U(a){if(q(a,bc))return bc;var b=q(a,cc),c=q(a,dc);return b&&c?cc+" "+dc:b||c?b?cc:dc:q(a,ac)?ac:_b}function V(a){this.id=w(),this.manager=null,this.options=i(a||{},this.defaults),this.options.enable=m(this.options.enable,!0),this.state=ec,this.simultaneous={},this.requireFail=[]}function W(a){return a&jc?"cancel":a&hc?"end":a&gc?"move":a&fc?"start":""}function X(a){return a==Gb?"down":a==Fb?"up":a==Db?"left":a==Eb?"right":""}function Y(a,b){var c=b.manager;return c?c.get(a):a}function Z(){V.apply(this,arguments)}function $(){Z.apply(this,arguments),this.pX=null,this.pY=null}function _(){Z.apply(this,arguments)}function ab(){V.apply(this,arguments),this._timer=null,this._input=null}function bb(){Z.apply(this,arguments)}function cb(){Z.apply(this,arguments)}function db(){V.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function eb(a,b){return b=b||{},b.recognizers=m(b.recognizers,eb.defaults.preset),new fb(a,b)}function fb(a,b){b=b||{},this.options=i(b,eb.defaults),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.element=a,this.input=z(this),this.touchAction=new T(this,this.options.touchAction),gb(this,!0),g(b.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function gb(a,b){var c=a.element;g(a.options.cssProps,function(a,d){c.style[v(c.style,d)]=b?a:""})}function hb(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var ib=["","webkit","moz","MS","ms","o"],jb=b.createElement("div"),kb="function",lb=Math.round,mb=Math.abs,nb=Date.now,ob=1,pb=/mobile|tablet|ip(ad|hone|od)|android/i,qb="ontouchstart"in a,rb=v(a,"PointerEvent")!==d,sb=qb&&pb.test(navigator.userAgent),tb="touch",ub="pen",vb="mouse",wb="kinect",xb=25,yb=1,zb=2,Ab=4,Bb=8,Cb=1,Db=2,Eb=4,Fb=8,Gb=16,Hb=Db|Eb,Ib=Fb|Gb,Jb=Hb|Ib,Kb=["x","y"],Lb=["clientX","clientY"];y.prototype={handler:function(){},init:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&o(this.element,this.evEl,this.domHandler),this.evTarget&&o(this.target,this.evTarget,this.domHandler),this.evWin&&o(x(this.element),this.evWin,this.domHandler)}};var Mb={mousedown:yb,mousemove:zb,mouseup:Ab},Nb="mousedown",Ob="mousemove mouseup";j(M,y,{handler:function(a){var b=Mb[a.type];b&yb&&0===a.button&&(this.pressed=!0),b&zb&&1!==a.which&&(b=Ab),this.pressed&&this.allow&&(b&Ab&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:vb,srcEvent:a}))}});var Pb={pointerdown:yb,pointermove:zb,pointerup:Ab,pointercancel:Bb,pointerout:Bb},Qb={2:tb,3:ub,4:vb,5:wb},Rb="pointerdown",Sb="pointermove pointerup pointercancel";a.MSPointerEvent&&(Rb="MSPointerDown",Sb="MSPointerMove MSPointerUp MSPointerCancel"),j(N,y,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Pb[d],f=Qb[a.pointerType]||a.pointerType,g=f==tb,h=s(b,a.pointerId,"pointerId");e&yb&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ab|Bb)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Tb={touchstart:yb,touchmove:zb,touchend:Ab,touchcancel:Bb},Ub="touchstart",Vb="touchstart touchmove touchend touchcancel";j(O,y,{handler:function(a){var b=Tb[a.type];if(b===yb&&(this.started=!0),this.started){var c=P.call(this,a,b);b&(Ab|Bb)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:tb,srcEvent:a})}}});var Wb={touchstart:yb,touchmove:zb,touchend:Ab,touchcancel:Bb},Xb="touchstart touchmove touchend touchcancel";j(Q,y,{handler:function(a){var b=Wb[a.type],c=R.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:tb,srcEvent:a})}}),j(S,y,{handler:function(a,b,c){var d=c.pointerType==tb,e=c.pointerType==vb;if(d)this.mouse.allow=!1;else if(e&&!this.mouse.allow)return;b&(Ab|Bb)&&(this.mouse.allow=!0),this.callback(a,b,c)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Yb=v(jb.style,"touchAction"),Zb=Yb!==d,$b="compute",_b="auto",ac="manipulation",bc="none",cc="pan-x",dc="pan-y";T.prototype={set:function(a){a==$b&&(a=this.compute()),Zb&&(this.manager.element.style[Yb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){l(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),U(a.join(" "))},preventDefaults:function(a){if(!Zb){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=q(d,bc),f=q(d,dc),g=q(d,cc);return e||f&&c&Hb||g&&c&Ib?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var ec=1,fc=2,gc=4,hc=8,ic=hc,jc=16,kc=32;V.prototype={defaults:{},set:function(a){return h(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=Y(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=Y(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=Y(a,this),-1===s(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=Y(a,this);var b=s(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(c.options.event+(b?W(d):""),a)}var c=this,d=this.state;hc>d&&b(!0),b(),d>=hc&&b(!0)},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=kc)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(kc|ec)))return!1;a++}return!0},recognize:function(a){var b=h({},a);return l(this.options.enable,[this,b])?(this.state&(ic|jc|kc)&&(this.state=ec),this.state=this.process(b),void(this.state&(fc|gc|hc|jc)&&this.tryEmit(b))):(this.reset(),void(this.state=kc))},process:function(){},getTouchAction:function(){},reset:function(){}},j(Z,V,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(fc|gc),e=this.attrTest(a);return d&&(c&Bb||!e)?b|jc:d||e?c&Ab?b|hc:b&fc?b|gc:fc:kc}}),j($,Z,{defaults:{event:"pan",threshold:10,pointers:1,direction:Jb},getTouchAction:function(){var a=this.options.direction,b=[];return a&Hb&&b.push(dc),a&Ib&&b.push(cc),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Hb?(e=0===f?Cb:0>f?Db:Eb,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Cb:0>g?Fb:Gb,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return Z.prototype.attrTest.call(this,a)&&(this.state&fc||!(this.state&fc)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this._super.emit.call(this,a)}}),j(_,Z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[bc]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&fc)},emit:function(a){if(this._super.emit.call(this,a),1!==a.scale){var b=a.scale<1?"in":"out";this.manager.emit(this.options.event+b,a)}}}),j(ab,V,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[_b]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ab|Bb)&&!f)this.reset();else if(a.eventType&yb)this.reset(),this._timer=e(function(){this.state=ic,this.tryEmit()},b.time,this);else if(a.eventType&Ab)return ic;return kc},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===ic&&(a&&a.eventType&Ab?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=nb(),this.manager.emit(this.options.event,this._input)))}}),j(bb,Z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[bc]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&fc)}}),j(cb,Z,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Hb|Ib,pointers:1},getTouchAction:function(){return $.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Hb|Ib)?b=a.velocity:c&Hb?b=a.velocityX:c&Ib&&(b=a.velocityY),this._super.attrTest.call(this,a)&&c&a.direction&&a.distance>this.options.threshold&&mb(b)>this.options.velocity&&a.eventType&Ab},emit:function(a){var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),j(db,V,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[ac]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&yb&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Ab)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||I(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=ic,this.tryEmit()},b.interval,this),fc):ic}return kc},failTimeout:function(){return this._timer=e(function(){this.state=kc},this.options.interval,this),kc},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ic&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),eb.VERSION="2.0.4",eb.defaults={domEvents:!1,touchAction:$b,enable:!0,inputTarget:null,inputClass:null,preset:[[bb,{enable:!1}],[_,{enable:!1},["rotate"]],[cb,{direction:Hb}],[$,{direction:Hb},["swipe"]],[db],[db,{event:"doubletap",taps:2},["tap"]],[ab]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var lc=1,mc=2;fb.prototype={set:function(a){return h(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?mc:lc},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&ic)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===mc||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(fc|gc|hc)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof V)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;var b=this.recognizers;return a=this.get(a),b.splice(s(b,a),1),this.touchAction.update(),this},on:function(a,b){var c=this.handlers;return g(r(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},off:function(a,b){var c=this.handlers;return g(r(a),function(a){b?c[a].splice(s(c[a],b),1):delete c[a]}),this},emit:function(a,b){this.options.domEvents&&hb(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&gb(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},h(eb,{INPUT_START:yb,INPUT_MOVE:zb,INPUT_END:Ab,INPUT_CANCEL:Bb,STATE_POSSIBLE:ec,STATE_BEGAN:fc,STATE_CHANGED:gc,STATE_ENDED:hc,STATE_RECOGNIZED:ic,STATE_CANCELLED:jc,STATE_FAILED:kc,DIRECTION_NONE:Cb,DIRECTION_LEFT:Db,DIRECTION_RIGHT:Eb,DIRECTION_UP:Fb,DIRECTION_DOWN:Gb,DIRECTION_HORIZONTAL:Hb,DIRECTION_VERTICAL:Ib,DIRECTION_ALL:Jb,Manager:fb,Input:y,TouchAction:T,TouchInput:Q,MouseInput:M,PointerEventInput:N,TouchMouseInput:S,SingleTouchInput:O,Recognizer:V,AttrRecognizer:Z,Tap:db,Pan:$,Swipe:cb,Pinch:_,Rotate:bb,Press:ab,on:n,off:o,each:g,merge:i,extend:h,inherit:j,bindFn:k,prefixed:v}),typeof define==kb&&define.amd?define(function(){return eb}):"undefined"!=typeof module&&module.exports?module.exports=eb:a[c]=eb}(window,document,"Hammer");function getUrlParameter(sParam){    var sPageURL = window.location.search.substring(1);    var sURLVariables = sPageURL.split('&');    for (var i = 0; i < sURLVariables.length; i++)     {        var sParameterName = sURLVariables[i].split('=');        if (sParameterName[0] == sParam)         {            return sParameterName[1];        }    }}(function($) {// Use this variable to set up the common and page specific functions. If you // rename this variable, you will also need to rename the namespace below.var Roots = {  // All pages  common: {    init: function() {//    MD.run();      	// JavaScript to be fired on all pages      	if(script_object.ismerchant=='no') {      		ShareLocation.run();        }      	MM_Fixed_Header_OnScroll();      	MM_City_Select();      	MM_Login();                MM_Add_Admin_Csv();      	MM_Logout();        Products.run();        MMSearch.run();        HEADER_MENU_TABS();        MallsDropdown.run();        ProductsFiltering.run();        advertiments_slider();        categoriesMobileSlidePanel();        products_filter_by_price();                if( script_object.reset_password_flag == 'true') {            resetPassLogin();        }        Populate_Selected_Sizes();    }  },  // Home page  home: {    init: function() {      // JavaScript to be fired on the home page      DFProducts.run();      home_slider();    }  },  // About us page, note the change from about-us to about_us.    about_us: {        init: function() {          // JavaScript to be fired on the about us page        }    },  //Merchant Dashboard Fired JS    merchant_dashboard: {  	init: function() {            console.log('dashboard-init');            $('link[id="flatsome-main-css"]')[0].disabled=true;            MD.run();        }    },  //Signup Page JS  signup: {  	init: function() {  		signupscript();  	}  },  //Deals Discounts & Fresh Stocks JS  deals_discounts: {  	init: function() {  		  	}  },  fresh_stocks: {  	init: function() {  		  	}  },  post_type_archive_product: {  	init: function() {  		MMBackbone.run();  	}	  },  tax_product_cat: {  	init: function() {  		MMBackbone.run();  	}	  },  single_mall: {  	init: function() {  		  	}	  },  single_product: {  	init: function() {  		product_images_slider();   		product_vertical_image_slider();   		product_malling_lazy_tabs_tooltips();   		trigger_size_chart_popup();  	}	  }};// The routing fires all common scripts, followed by the page specific scripts.// Add additional events for more control over timing e.g. a finalize eventvar UTIL = {  fire: function(func, funcname, args) {    var namespace = Roots;    funcname = (funcname === undefined) ? 'init' : funcname;    if (func !== '' && namespace[func] && typeof namespace[func][funcname] === 'function') {      namespace[func][funcname](args);    }  },  loadEvents: function() {    UTIL.fire('common');    $.each(document.body.className.replace(/-/g, '_').split(/\s+/),function(i,classnm) {      UTIL.fire(classnm);    });  }};$(document).ready(UTIL.loadEvents);})(jQuery); // Fully reference jQuery after this point.function distance(lat1, lon1, lat2, lon2, unit) {    var radlat1 = Math.PI * lat1/180    var radlat2 = Math.PI * lat2/180    var radlon1 = Math.PI * lon1/180    var radlon2 = Math.PI * lon2/180    var theta = lon1-lon2    var radtheta = Math.PI * theta/180    var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);    dist = Math.acos(dist)    dist = dist * 180/Math.PI    dist = dist * 60 * 1.1515    if (unit=="K") { dist = dist * 1.609344 }    if (unit=="N") { dist = dist * 0.8684 }    return dist}function GetLatLngByCity(user_location) {	jQuery.ajax({ url:script_object.ajaxurl+'?action=get_city_latlng_from_db&city='+user_location, dataType: 'json',	    success: function(data){			lat = data[0];			lng = data[1];			var geocoder = new google.maps.Geocoder();			geocoder.geocode( { 'address': user_location}, function( response, status ) {				if ( status == google.maps.GeocoderStatus.OK ) {							latLng = response[0].geometry.location;					lat = latLng.lat();					lng = latLng.lng();					jQuery.cookie("me_lat", lat, {path: "/", domain: ""});					jQuery.cookie("me_lng", lng, {path: "/", domain: ""});				} else {					jQuery.cookie("me_lat", '', {path: "/", domain: ""});					jQuery.cookie("me_lng", '', {path: "/", domain: ""});				}							});//			window.location.href=  script_object.current_site_url;//                        jQuery("header").load(location.href + " /pune");		}		});}function MM_City_Select() {		var current_city = script_object.current_city;		jQuery(".mm_select_city").chosen({no_results_text: "Oops, nothing found!"});		jQuery(".location_popup_city_select").chosen({no_results_text: "Oops, nothing found!"});        if(script_object.city_dropdown_redirect == 'true') {			jQuery('.mm_select_city').on('change', function(evt, params) {				if(jQuery(this).val()=="") {  	    			  	    		} else {		    		jQuery.cookie("city", jQuery(this).val(), {path: "/", domain: ""});		    		window.location.href =  script_object.mall_archive_url+'/'+jQuery(this).val()+'/';		    		GetLatLngByCity(jQuery(this).val());		    	}				});	    } else {		    jQuery('.mm_select_city').on('change', function(evt, params) {		    	if(jQuery(this).val()=="") {		    				    	} else {				    	jQuery.cookie("city", jQuery(this).val(), {path: "/", domain: ""});			    	GetLatLngByCity(jQuery(this).val());			    				    }				});  	    }  	    //Share Location Modal Select Box on Change Event  	    jQuery('.location_popup_city_select').on('change', function(evt, params) {  	    	city = jQuery(this).val();  	    	if(city=="") {  	    		alert("Please Select City..");  	    	} else {				jQuery.cookie("city", city, {path: "/", domain: ""});				jQuery('.mm_select_city option[value='+city+']').attr("selected", "selected");		      	jQuery(".mm_select_city").trigger('chosen:updated');				GetLatLngByCity(city);			}		});  	      	    //Set Current City Based On Cookies And URL City in Select Box  	    if(current_city) {  	    	jQuery.cookie("city", current_city, {path: "/", domain: ""});  	    	jQuery('.mm_select_city option[value='+current_city+']').attr("selected", "selected");	      	jQuery(".mm_select_city").trigger('chosen:updated');  	    }	        else {		      	city = jQuery.cookie("city");	      	jQuery('.mm_select_city option[value='+city+']').attr("selected", "selected");	      	jQuery(".mm_select_city").trigger('chosen:updated');	    }}function fixed_header_callback() {	var window_width = jQuery(window).width();	if(window_width>=767) {		jQuery(window).bind("scroll", function(){			var top = jQuery(window).scrollTop();			var header_height = parseFloat( jQuery("header").height() ) + 30;			if(top > header_height){				jQuery(".header_replacer").css({					'height' : jQuery("header").height(),									});				jQuery(".header_replacer").show();				jQuery("header").addClass("header_fixed");				setTimeout(function(){					jQuery("header").show();				}, 300);											} else {				jQuery(".header_replacer").hide();				jQuery("header").removeClass("header_fixed").removeAttr('style');							}			});		} else {		jQuery(".header_replacer").hide();		jQuery(window).unbind("scroll");		jQuery("header").removeClass("header_fixed").removeAttr('style');	}}function MM_Fixed_Header_OnScroll() {		fixed_header_callback();		jQuery(window).resize(function(){			fixed_header_callback();	});	}function MM_Login() {	jQuery(".site_login").click(function(){		jQuery(".email_confirmation_message").hide();	});	jQuery("#login_window #login").click(function() {		var action = jQuery(this).attr("action");		var validate = true;		var login_type = jQuery("#login_window input[name=login_type]:checked").val();		var email = jQuery("#login_window #login-email").val();		var password = jQuery("#login_window #login-password").val();		var remember = jQuery("#login_window #remember_check:checked").val();		var security = jQuery("#login_window #security").val();		var page_id = jQuery("#login_window #current_page_id").val();		jQuery("#login_window #error").hide();		if(typeof remember === 'undefined') {			remember = 'false';		} else {			remember = 'true';		}		if(email=="" || password=="") {			alert("Please Enter Email Address and Password!!!");			validate = false;		}				if(validate) {			jQuery(".login_loader").css("display", "inline-block");			jQuery.ajax({				type: 'POST',								url: script_object.ajaxurl, 				data: {				   	action: action,				   	email: email,				   	password: password,				   	remember: remember,				   	security: security,				   	page_id: page_id,				},				dataType: 'json',				success: function(response) {                                        console.log('hello');					var auth = response.loggedin;					var redirect = response.redirecturl;					var headerlogout_button = response.headerlogout;					var footerlogoutbutton = response.footerlogout;					if( auth == false ) {						jQuery("#login_window #error").show();					} else {						if(action=="mm_merchant_login") {							window.location.reload();						} else {								jQuery("#loginModal").modal('hide');						}						jQuery(".site_login").css('display', 'none');						jQuery(".site_logout").css('display', 'block');					}					jQuery(".login_loader").css("display", "none");				}			});		}	});}function MM_Add_Admin_Csv() {            var _this = this;             _this.uploader = new plupload.Uploader(script_object.plupload_zip_csv);        _this.uploader.bind('Init', function(up, params) { });        //initilize  wp plupload        _this.uploader.init();        _this.uploader.bind('FilesAdded', function (up, files) {        	jQuery('#upload_zip_csv_previews').addClass("activate_uploading");        	jQuery.each(files, function (i, file) {            	extension = file.name.replace(/^.*\./, '');            	id = "";            	if(extension=="zip") {            		jQuery(".csv_zip_uploading_succes_error").hide();            		id = "zipfile";            	} else {            		id = "csvfile";            	}            	if(jQuery("#"+id).length>0) {            		jQuery("#"+id).html('<div class="zipcsvuploadprogress">',	                '<div class="progress"><div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"><span class="sr-only">0%</span></div></div>');            	} else {	                jQuery('#upload_zip_csv_previews').append(	                '<div id="' + id + '" class="csvzipuploadpreview">'+	                '<div class="zipcsvuploadprogress">'+	                '<div class="progress"><div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"><span class="sr-only">0%</span></div></div>'+	                '</div></div>');            	}            });            up.refresh(); // Reposition Flash/Silverlight            _this.uploader.start();        });        _this.uploader.bind('UploadProgress', function (up, file) {            extension = file.name.replace(/^.*\./, '');            id = "";            if(extension=="zip") {            	id = "zipfile";            } else {            	id = "csvfile";            }        	console.log(jQuery('#' + id + " .progress .progress-bar").html(file.percent + "%"));        	console.log(jQuery('#' + id + " .progress .progress-bar").css('width', file.percent + "%"));        });        // On Error occur        _this.uploader.bind('Error', function (up, err) {        	alert("Error: While Uploading CSV and ZIP");            up.refresh(); // Reposition Flash/Silverlight            file_id = err.file.id;            jQuery('#upload_images_preview #'+ file_id).remove();        });        _this.uploader.bind('FileUploaded', function (up, file, response) {            var result = jQuery.parseJSON(response.response);            if (result.success) {            	setTimeout(function(){	            	if(result.filetype=="zip") {	                	jQuery('#upload_zip_csv_previews #zipfile').replaceWith(result.html);	                	jQuery(".upload_product_images_first").css("display", "inline-block");	            		jQuery("#upload_csv_products").attr("disabled", "disabled");	            		jQuery("#upload_csv_products_images").css("display", "inline-block");	            		jQuery(".upload_csv_product_images_row").show();	            	} else {	            		jQuery('#upload_zip_csv_previews #csvfile').replaceWith(result.html);	            		jQuery(".upload_products_by_csv").css('display', 'block');	            		jQuery(".run_csv_upload").hide();	            		jQuery("#csv_upload_products_list").html("");	            	}	            }, 1500);             }        });        jQuery('#products_csv_uploads_tml').find("#admin_upload_csv_products_images").click(function(event) {           event.preventDefault();             var _this = this;		var target = jQuery(event.target);		target.html('<i class="fa fa-spin fa-cog"></i>');		jQuery.ajax({            type: 'GET',            url: script_object.ajaxurl,            data: {                action: 'upload_admin_csv_products_images',            },            cache: false,            dataType: 'json',            success: function(data, textStatus, XMLHttpRequest) {            	target.html('Upload Product Images');	            	if(data.result=="success") {            		jQuery(".csv_zip_uploading_succes_error").html("Images Uploaded Successfully...");            		jQuery(".csv_zip_uploading_succes_error").removeClass("alert-danger").addClass('alert-success').show();//               		jQuery("#upload_csv_products").removeAttr("disabled");               		jQuery(".upload_csv_product_images_row").hide();               	} else {            		jQuery(".csv_zip_uploading_succes_error").html("Error While Uploading Images Try Again!!!");            		jQuery(".csv_zip_uploading_succes_error").removeClass("alert-success").addClass('alert-danger').show();            	}           event.preventDefault();              }        });                    });        jQuery('#products_csv_uploads_tml').find("#load_admin_csv_products").click(function(event) {           event.preventDefault();            console.log("hey whats up");            var _this = this;		var target = jQuery(event.target);		var chunk = target.attr("data-chunk");                console.log(chunk);		var products_chunks_count = jQuery("#products_chunks_count").val();		target.html('<i class="fa fa-spin fa-cog"></i>');		jQuery.ajax({            type: 'GET',            url: script_object.ajaxurl,            data: {                action: 'load_admin_products_from_csv',                products_chunks_count: products_chunks_count,                chunk: chunk,            },            cache: false,            dataType: 'json',            success: function(data, textStatus, XMLHttpRequest) {            	target.html('Load CSV Products');            	if(data.seflag=='success') {            		jQuery(".run_csv_upload").html(data.chunks_buttons).show();	            	jQuery("#start_admin_uploading_csv_products:first-child").css("display", "inline-block");	            	jQuery("#csv_upload_products_list").html(data.response);	            	jQuery(".upload_products_by_csv").hide();    jQuery('#products_csv_uploads_tml #start_admin_uploading_csv_products').on('click', function(event) {            event.preventDefault();           console.log("soch");//            return false;            var _this = this;		var target = jQuery(event.target);		var chunk = target.attr("data-chunk");		product_rows = Array();		jQuery(".each_csv_product").each(function(){			product_rows.push(jQuery(this));		});		row_count = jQuery(".each_csv_product").length;		doCSVAJAXRequest1(target, 0, product_rows, row_count, chunk);        });            	} else {            		jQuery("#start_admin_uploading_csv_products").css("display", "none");	            	jQuery("#csv_upload_products_list").html(data.response);            	}//            event.preventDefault();               }        });        });                 function doCSVAJAXRequest1(target, product_index, product_rows, row_count, chunk) {                console.log("hey how");		var _this = this;		product_row = product_rows[product_index];		product_info_object = Array();		if(chunk=="") {			jQuery(product_row).find(".csv_product_loader").css("display", "inline-block");			jQuery(product_row).find(".product_information").each(function(){				product_info_object.push( jQuery(this).find("input").val() );			});		}				jQuery.ajax({	            type: 'POST',	            url: script_object.ajaxurl,	            data: {	                action: 'run_admin_uploads_products',	                product_info_object: product_info_object,	                chunk: chunk,	            },	            cache: false,	            dataType: 'json',	            success: function(data, textStatus, XMLHttpRequest) {	            	if(data.load_csv) {	            		target.attr("data-chunk", "");	            		jQuery("#csv_upload_products_list").html(data.load_csv).promise().done(function(){	            			product_rows = Array();							jQuery(".each_csv_product").each(function(){								product_rows.push(jQuery(this));							});							row_count = jQuery(".each_csv_product").length;	            			doCSVAJAXRequest1(target, product_index, product_rows, row_count, '');	            		});	            	} else {	            		jQuery(product_row).find(".csv_product_loader").css("display", "none");		            	if(data.success_error=="success") {		            		jQuery(product_row).find(".alert_error").addClass(data.class).html(data.success).css("display", "block");		            		jQuery(product_row).find(".csv_product_loader_error").css("display", "none");		            		jQuery(product_row).find(".csv_product_loader_completed").css("display", "inline-block");		            		if(data.unuploaded_images_flag=='true') {		            			jQuery(product_row).find(".product_unuploaded_images_error").html(data.unuploaded_images).css("display", "block");		            		}		            	} else {		            		jQuery(product_row).find(".alert_error").addClass(data.class).html(data.error).css("display", "block");		            		jQuery(product_row).find(".csv_product_loader_completed").css("display", "none");		            		jQuery(product_row).find(".csv_product_loader_error").css("display", "inline-block");		            	}		            			            	count = parseInt(row_count)-2;		            	if(parseInt(product_index)<=count) {		            		product_index = product_index + 1;		 	            		doCSVAJAXRequest1(target, product_index, product_rows, row_count, '');	 	            	} else {	 	            		if(target.next().length>0) {	 	            			target.hide();	 	            			target.next().css('display', 'inline-block');	 	            		} else {	 	            			target.attr("disabled", "disabled");	 	            			jQuery("#upload_zip_csv_previews").html("").removeClass("activate_uploading");	 	            			target.html("CSV Uploading Completed");	 	            		}	 	            	} 	            	}                        	            }	    });           // event.preventDefault(); //           return false;	}              // vendor csv              jQuery('#products_csv_uploads_tml').find("#load_vendor_csv_products").click(function(event) {           event.preventDefault();            console.log("hey whats up");            var _this = this;		var target = jQuery(event.target);		var chunk = target.attr("data-chunk");                console.log(chunk);		var products_chunks_count = jQuery("#products_chunks_count").val();		target.html('<i class="fa fa-spin fa-cog"></i>');		jQuery.ajax({            type: 'GET',            url: script_object.ajaxurl,            data: {                action: 'load_vendor_products_from_csv',                products_chunks_count: products_chunks_count,                chunk: chunk,            },            cache: false,            dataType: 'json',            success: function(data, textStatus, XMLHttpRequest) {            	target.html('Load CSV Products');            	if(data.seflag=='success') {            		jQuery(".run_csv_upload").html(data.chunks_buttons).show();	            	jQuery("#start_vendor_uploading_csv_products:first-child").css("display", "inline-block");	            	jQuery("#csv_upload_products_list").html(data.response);	            	jQuery(".upload_products_by_csv").hide();    jQuery('#products_csv_uploads_tml #start_vendor_uploading_csv_products').on('click', function(event) {            event.preventDefault();           //            return false;            var _this = this;		var target = jQuery(event.target);		var chunk = target.attr("data-chunk");		product_rows = Array();		jQuery(".each_csv_product").each(function(){			product_rows.push(jQuery(this));		});		row_count = jQuery(".each_csv_product").length;		doCSVAJAXRequest(target, 0, product_rows, row_count, chunk);        });            	} else {            		jQuery("#start_vendor_uploading_csv_products").css("display", "none");	            	jQuery("#csv_upload_products_list").html(data.response);            	}//            event.preventDefault();               }        });        });                        function doCSVAJAXRequest(target, product_index, product_rows, row_count, chunk) {                console.log("hey how are you");		var _this = this;		product_row = product_rows[product_index];		product_info_object = Array();		if(chunk=="") {			jQuery(product_row).find(".csv_product_loader").css("display", "inline-block");			jQuery(product_row).find(".product_information").each(function(){				product_info_object.push( jQuery(this).find("input").val() );			});		}				jQuery.ajax({	            type: 'POST',	            url: script_object.ajaxurl,	            data: {	                action: 'run_vendor_uploads_products',	                product_info_object: product_info_object,	                chunk: chunk,	            },	            cache: false,	            dataType: 'json',	            success: function(data, textStatus, XMLHttpRequest) {	            	if(data.load_csv) {	            		target.attr("data-chunk", "");	            		jQuery("#csv_upload_products_list").html(data.load_csv).promise().done(function(){	            			product_rows = Array();							jQuery(".each_csv_product").each(function(){								product_rows.push(jQuery(this));							});							row_count = jQuery(".each_csv_product").length;	            			doCSVAJAXRequest(target, product_index, product_rows, row_count, '');	            		});	            	} else {	            		jQuery(product_row).find(".csv_product_loader").css("display", "none");		            	if(data.success_error=="success") {		            		jQuery(product_row).find(".alert_error").addClass(data.class).html(data.success).css("display", "block");		            		jQuery(product_row).find(".csv_product_loader_error").css("display", "none");		            		jQuery(product_row).find(".csv_product_loader_completed").css("display", "inline-block");		            		if(data.unuploaded_images_flag=='true') {		            			jQuery(product_row).find(".product_unuploaded_images_error").html(data.unuploaded_images).css("display", "block");		            		}		            	} else {		            		jQuery(product_row).find(".alert_error").addClass(data.class).html(data.error).css("display", "block");		            		jQuery(product_row).find(".csv_product_loader_completed").css("display", "none");		            		jQuery(product_row).find(".csv_product_loader_error").css("display", "inline-block");		            	}		            			            	count = parseInt(row_count)-2;		            	if(parseInt(product_index)<=count) {		            		product_index = product_index + 1;		 	            		doCSVAJAXRequest(target, product_index, product_rows, row_count, '');	 	            	} else {	 	            		if(target.next().length>0) {	 	            			target.hide();	 	            			target.next().css('display', 'inline-block');	 	            		} else {	 	            			target.attr("disabled", "disabled");	 	            			jQuery("#upload_zip_csv_previews").html("").removeClass("activate_uploading");	 	            			target.html("CSV Uploading Completed");	 	            		}	 	            	} 	            	}                        	            }	    });           // event.preventDefault(); //           return false;	}}function MM_Logout() {	jQuery(".site_logout").click(function(){		_this = jQuery(this);		_nonce = _this.attr("data-mm-logout");		jQuery(".site_logout").find(".logout-loader").css('display', 'inline-block');		jQuery.ajax({			type: 'GET',							url: script_object.ajaxurl, 			data: {			   	action: "mm_logout",			   	_nonce: _nonce,			},			dataType: 'json',			success: function(response) {				if(script_object.is_home !='true') {					window.location.href = script_object.home_url;				}					jQuery(".site_logout").hide();				jQuery(".site_logout").find(".logout-loader").css('display', 'none');				jQuery(".site_login").show();			}		});				});}function resetPassLogin() {	jQuery.ajax({		type: 'POST',						url: script_object.ajaxurl, 		data: {		   	action: "reset_password_login",		 		   	arguments: script_object.reset_password_parameters,  			},		dataType: 'json',		success: function(response) {			window.location.href = script_object.editprofileurl;				}	});	        }function signupscript() {	jQuery(".signupselect_box").chosen({no_results_text: "Oops, nothing found!"});	jQuery("#reg_merchant").change(function(){		var _this = jQuery(this);		if(_this.is(":checked")) {			jQuery(".select_signup_city").slideDown();		} else {			jQuery(".select_signup_city").slideUp();			if(jQuery(".select_signup_malls").is(":visible")) {				jQuery(".select_signup_malls").slideUp();			}			if(jQuery(".select_signup_shops").is(":visible")) {				jQuery(".select_signup_shops").slideUp();			}		}	});	jQuery("#reg_merchant").trigger('change');	jQuery(".select_signup_city select").change(function(){		var _this = jQuery(this);		city = _this.val();		jQuery(".select_signup_malls").slideUp();		jQuery(".select_signup_shops").slideUp();		jQuery(".mall_name_field").hide();		jQuery(".shop_name_field").hide();		jQuery(".loadingmallsshops").show();		jQuery.ajax({			type: 'GET',							url: script_object.ajaxurl, 			data: {			   	action: "get_city_malls",			   	city: city,			},			dataType: 'json',			success: function(response) {				malls = response.malls;	        	var html = '';	        	if(malls.length>0) {		        	html += '<option value="">';		        	html += '</option>';			        	jQuery.each(malls, function() { mall = this;		        		html += '<option value="'+mall[0]+'">';		        		html += mall[1];		        		html += '</option>';			        	});	        	} else {	        		html += '<option value="">';		        	html += 'No Malls Found';		        	html += '</option>';	        	}				jQuery(".select_signup_malls select").html(html);				jQuery(".select_signup_malls select").trigger('chosen:updated');				jQuery(".loadingmallsshops").hide();				jQuery(".select_signup_malls").slideDown();				jQuery(".shop_name_field").slideDown();			}		});			});	jQuery("body").on("click", ".new_mall", function() {		jQuery(".select_signup_malls").hide();		jQuery(".mall_name_field").show();		return false;	});	jQuery(".select_signup_malls select").change(function(){		var _this = jQuery(this);		mall_id = _this.val();		// jQuery(".select_signup_shops").slideUp();		// jQuery(".loadingmallsshops").show();		// jQuery.ajax({		// 	type: 'GET',					 //        url: script_object.ajaxurl, 	 //        data: {	 //           	mall_id: mall_id,	 //           	action: "get_mall_shops"	 //        },	 //        dataType: 'json',	 //        success: function(res) {	 //        	shops = res.shops;	 //        	var html = '';	 //        	if(shops.length>0) {		//         	html += '<option value="">';		//         	html += 'Select Shops';		//         	html += '</option>';		//         	jQuery.each(shops, function() { shop = this;		//         		html += '<option value="'+shop[0]+'">';		//         		html += shop[1];		//         		html += '</option>';			//         	});	 //        	}	 //        	else {	 //        		html += '<option value="">';		//         	html += 'No Shops Found';		//         	html += '</option>';	 //        	}	 //        	jQuery(".select_signup_shops select").html(html);		 //        	jQuery(".select_signup_shops select").trigger('chosen:updated');	 //        	jQuery(".loadingmallsshops").hide();	 //        	jQuery(".select_signup_shops").slideDown();		// 	}		// });	});}function home_slider() {	var home_slide = jQuery('.home_carousel').owlCarousel({	    items:1,	    loop:true,	    nav:true,	    navText: ['', ''],	    lazyLoad:false,	    autoplay:true,		autoplayTimeout:3000,		smartSpeed:1200,		autoplayHoverPause:true,	});}function product_images_magnify() {	var window_width = jQuery(window).width();    if(window_width>=767) {		jQuery(".cloud-zoom").CloudZoom({				position: 'right',				zoomWidth: '380',        		zoomHeight: '380',		});	}}function product_images_slider() {		product_images_magnify();	var product_images_slider = jQuery('.product_images_slider').owlCarousel({	    items:1,	    margin:5,	    loop:false,	    nav:false,	    navText: ['', ''],	    lazyLoad:false,	    autoplay:false,	    mouseDrag: false,		autoplayTimeout:5000,		autoplayHoverPause:true,	});	jQuery("body").on("click", ".elastislide-vertical ul li", function() {		jQuery(".elastislide-vertical ul li").removeClass("active_product_thumb");		slideto = jQuery(this).attr("slideto");		jQuery(this).addClass("active_product_thumb");		product_images_slider.trigger('to.owl.carousel', [slideto, 400]);	});	product_images_slider.on("changed.owl.carousel", function(event) {		target = jQuery(event.currentTarget);		target.find(".item").css("display", "block");	});	}function product_vertical_image_slider() {	jQuery( '.vertical_product_carousel' ).elastislide( {		orientation : 'vertical',		minItems : 4	});}function poup_product_vertical_image_slider(sliderid) {	jQuery( '#'+sliderid ).elastislide( {		orientation : 'vertical',		minItems : 4	});}function advertiments_slider() {	var large_ads = jQuery('.large_ads_carousel div').length;	if(large_ads==1) {		large_ads_loop = false; 	} else {		large_ads_loop = true; 	}	var large_ads_carousel = jQuery('.large_ads_carousel').owlCarousel({	    items:1,	    loop:large_ads_loop,	    nav:false,	    navText: ['', ''],	    lazyLoad:false,	    autoplay:true,		autoplayTimeout:6000,		smartSpeed:1000,		autoplayHoverPause:true,	});	large_ads_carousel.on('initialize.owl.carousel initialized.owl.carousel ' +                'initialize.owl.carousel initialize.owl.carousel ' +                'resize.owl.carousel resized.owl.carousel ' +                'refresh.owl.carousel refreshed.owl.carousel ' +                'update.owl.carousel updated.owl.carousel ' +                'drag.owl.carousel dragged.owl.carousel ' +                'translate.owl.carousel translated.owl.carousel ' +                'to.owl.carousel changed.owl.carousel', function(e) {            jQuery('.large_ads_carousel').find("img").css('display', 'block');      });	var small_ads = jQuery('.small_ads_carousel div').length;	if(small_ads==1) {		small_ads_loop = false; 	} else {		small_ads_loop = true; 	}	var small_ads_carousel = jQuery('.small_ads_carousel').owlCarousel({	    items:1,	    loop:small_ads_loop,	    nav:false,	    navText: ['', ''],	    lazyLoad:false,	    autoplay:true,		autoplayTimeout:9000,		smartSpeed:1000,		autoplayHoverPause:true,	});	small_ads_carousel.on('initialize.owl.carousel initialized.owl.carousel ' +                'initialize.owl.carousel initialize.owl.carousel ' +                'resize.owl.carousel resized.owl.carousel ' +                'refresh.owl.carousel refreshed.owl.carousel ' +                'update.owl.carousel updated.owl.carousel ' +                'drag.owl.carousel dragged.owl.carousel ' +                'translate.owl.carousel translated.owl.carousel ' +                'to.owl.carousel changed.owl.carousel', function(e) {            jQuery('.small_ads_carousel').find("img").css('display', 'block');      });    }function HEADER_MENU_TABS() {  jQuery( ".main_menu_product_cat_tabs" ).tabs({    event: "mouseover"  }).addClass( "ui-tabs-vertical ui-helper-clearfix" );    jQuery( ".main_menu_product_cat_tabs li" ).removeClass( "ui-corner-top" ).addClass( "ui-corner-left" );}function product_malling_lazy_tabs_tooltips() {	jQuery('.product_malling_delivery_tooltip').tooltip();}function trigger_size_chart_popup() {	var size_chart = document.location.hash;	jQuery(size_chart).modal('show');}function categoriesMobileSlidePanel() {	var jPanelMenu = {};	jPanelMenu = jQuery.jPanelMenu({			menu: '.mobile_category_menu'	});		var jR = jRespond([	{		label: 'small',		enter: 0,		exit: 766	},{		label: 'large',		enter: 767,		exit: 100000	}	]);	jR.addFunc({		breakpoint: 'small',		enter: function() {			jPanelMenu.on();			jQuery("#jPanelMenu-menu").removeClass("hidden-xs");			jQuery(document).on('click', '.mm_product_attributes_widget .product_attributes input', function(e){				jPanelMenu.close(); 				jQuery(".mobile_product_categories_menu").removeClass("opencatmenu");			});			jQuery(document).on('click', '.mobile_product_categories_menu', function(e){				if(!jQuery(this).hasClass("opencatmenu")) {					jQuery(this).find("i").removeClass("fa-arrow-right").addClass("fa-arrow-left");					jQuery(this).addClass("opencatmenu");				} else {					jQuery(this).find("i").removeClass("fa-arrow-left").addClass("fa-arrow-right");					jQuery(this).removeClass("opencatmenu");				}			});			jQuery(document).on('click', '.mobile_cat_close', function(e){				var catmenubutton = jQuery(".mobile_product_categories_menu");				if(!catmenubutton.hasClass("opencatmenu")) {					catmenubutton.find("i").removeClass("fa-arrow-right").addClass("fa-arrow-left");					catmenubutton.addClass("opencatmenu");				} else {					catmenubutton.find("i").removeClass("fa-arrow-left").addClass("fa-arrow-right");					catmenubutton.removeClass("opencatmenu");				}			});					},		exit: function() {			jPanelMenu.off();		}	});}function Populate_Selected_Sizes() {	jQuery('body').on('click', '.product_size span.size', function(e){		size = jQuery(this).text();		jQuery(".product_size span.size").removeClass("activesize");		jQuery(this).addClass("activesize");		jQuery(".product_size .selected_csize").val(size);	});}function products_filter_by_price() {	if(jQuery(".price_filter_slider").length>0) {		var min_price = jQuery( '.price_filter_slider_wrap input[name="min_price"]' ).attr( 'data-min' ),                max_price = jQuery( '.price_filter_slider_wrap input[name="max_price"]' ).attr( 'data-max' );		current_min_price = parseInt( min_price, 10 );		current_max_price = parseInt( max_price, 10 );		currency = script_object.currency_symbol;		jQuery( '.price_filter_slider' ).slider({			range: true,			animate: true,			min: parseInt(min_price),			max: parseInt(max_price),			values: [ parseInt(min_price), parseInt(max_price) ],			create : function( event, ui ) {				jQuery( ".price_range" ).text( " "+currency+" " + current_min_price + " - "+currency+" " + current_max_price );				jQuery( '.price_filter_slider_wrap input[name="min_price"]' ).val( current_min_price );				jQuery( '.price_filter_slider_wrap input[name="max_price"]' ).val( current_max_price );						},			slide: function( event, ui ) {							jQuery( ".price_range" ).text( " "+currency+" " + ui.values[ 0 ] + " - "+currency+" " + ui.values[ 1 ] );				jQuery( '.price_filter_slider_wrap input[name="min_price"]' ).val( ui.values[0] );				jQuery( '.price_filter_slider_wrap input[name="max_price"]' ).val( ui.values[1] );						},			change: function( event, ui ){				MMBackbone.mmroutes = new MMBackbone.MMRoutes();				MMBackbone.mmroutes.navigate("", {trigger: true, replace: true});				jQuery(".products_pagination").html("");				var main_category = script_object.product_cats;				var cats = Array();				jQuery(".mm_product_attributes_widget .product_attributes input:checked").each(function(){					taxonomy = jQuery(this).attr("taxonomy");                                        var post_ids = jQuery(this).attr('data-post-ids');					cats.push({'taxonomy': taxonomy,  'term':  jQuery(this).val()});				});				dnd = '';				jQuery(".dd_products_tax_page_filtering .dnd_filters input:checked").each(function(){					key = jQuery(this).val();					dnd = key;				});				jQuery('.category_products_inner_wrap').block({ message: null, overlayCSS: { background: 'snow url(' + woocommerce_params.ajax_loader_url +') no-repeat center', opacity: 0.5 } });        		if(cats.length=0) {					jQuery.ajax({							type: 'GET',										    url: script_object.ajaxurl, 						    data: {						       	action: "show_current_category_products",						       	main_category: main_category,						       	city: jQuery.cookie("city"),						       	dnd: dnd,						       	min_price: ui.values[0],					       		max_price: ui.values[1],					       		search_term: script_object.search_term,						    },						    dataType: 'json',						    success: function(res) {						    	jQuery('.category_products_inner_wrap').unblock();						       	jQuery('.sidebar').unblock();						    	if(res.products!='') {						       		jQuery(".category_products_inner_wrap").html(res.products);						       		jQuery(".products_pagination").html(res.pagination);						       								       								       	} else {						       		jQuery(".category_products_inner_wrap").html("<h4>There are no products..</h4>");						       		jQuery(".products_pagination").html("");						       	}                                                        if(res.new_product_attributes !='') {                                                            jQuery('#product-attributes-container').html(res.new_product_attributes);                                                        }						       	var top_offset = jQuery(".page-header").offset();                            	top_offset = parseInt(top_offset.top);                                                         	jQuery(window).scrollTo(top_offset, 800);						    }					});				} else {	        		jQuery.ajax({						type: 'GET',									    url: script_object.ajaxurl, 					    data: {					       	action: "products_attributes_filtering",					       	main_category: main_category,					       	cats: cats,					       	dnd: dnd,					       	city: jQuery.cookie("city"),					       	min_price: ui.values[0],					       	max_price: ui.values[1],					    },					    dataType: 'json',					    success: function(res) {					    	if(res.products!='') {					       		jQuery(".category_products_inner_wrap").html(res.products);					       		jQuery(".products_pagination").html("");					       	} else {					       		jQuery(".category_products_inner_wrap").html("<h4>There are no products..</h4>");					       		jQuery(".products_pagination").html("");					       	}                                                if(res.new_product_attributes !='') {                                                                                                                jQuery('#product-attributes-container').html(res.new_product_attributes);                                                        }					       	jQuery('.category_products_inner_wrap').unblock();       						    }					});	        		}    		}		});	}}